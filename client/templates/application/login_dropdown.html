<template name="loginDropdown">
  <li class="dropdown">
    <a class="dropdown-toggle" href="#" data-toggle="dropdown">
      {{#unless currentUser}}
        {{> avatar imgClass="navbar-avatar" version="avatar30" }}
        Anmelden <span class="caret"></span>
      {{else}}
        {{> avatar imgClass="navbar-avatar" userId=currentUser._id version="avatar30" }}
        {{currentUser.profile.firstname}} <span class="caret"></span>
      {{/unless}}
    </a>
    <ul class="dropdown-menu login-dropdown">
      {{#unless currentUser}}
        <div class="col-lg-12">
          <form>
            <div class="form-group">
              <label for="inputUserId">HAW-Benutzerkennung</label>
              <input id="inputUserId" class="form-control login" type="text" name="ldap" placeholder="z.B. abc123" />
            </div>
            <div class="form-group">
              <label for="inputPassword">HAW-Passwort</label>
              <input id="inputPassword" class="form-control login" type="password" name="password" placeholder="HAW-Passwort"/>
            </div>
            {{#if loggingIn}}
              <div class="alert alert-info" role="alert">
                Anmeldung wird durchgeführt...
              </div>
            {{else}}
              {{#if failedLogin}}
                <div class="alert alert-danger" role="alert">
                  <strong>Anmeldung fehlgeschlagen!</strong> Bitte überprüfe Benutzerkennung und Passwort.
                </div>
              {{/if}}
            {{/if}}
            <div class="form-group">
              <button type="submit" id="login-buttons-password" class="login btn btn-primary btn-block">
                Anmelden
              </button>
            </div>
          </form>
        </div>
      {{else}}
        <li><a href="{{pathFor 'userProfile' userId=currentUser._id uniqueName=(getEmailName currentUser._id) }}">Mein Profil</a></li>
        <li role="separator" class="divider"></li>
        <li><a href="#" id="login-buttons-logout">Abmelden</a></li>
      {{/unless}}
    </ul>
  </li>
</template>
